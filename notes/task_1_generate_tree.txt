// =================================================================
// TASK 1: CATEGORY GENERATION (The Architect)
// Goal: Analyze a chunk of links and generate a list of folder paths relevant to that chunk.
// Runs repeatedly for every chunk of data. The JS client must de-duplicate and finalize the list.
// =================================================================

/**
 * 1A. JSON Schema for Task 1 Output (Array of Strings)
 */
const TASK1_FOLDER_PATH_SCHEMA = {
  type: "ARRAY",
  description: "A comprehensive list of unique folder paths relevant to the input batch.",
  items: {
    type: "STRING",
    description: "A unique, concise folder path, optionally hierarchical using the forward slash '/'."
  }
};

/**
 * 1B. System Instruction for Task 1 (Updated for Iteration)
 */
function getTask1SystemPrompt() {
    return `
You are a Folder Structure Architect. Your task is to analyze a list of bookmark data from a single batch and generate a comprehensive list of all UNIQUE folder paths needed for those links. Your list will be merged with lists from other batches by the client.

RULES:
1.  OUTPUT MUST BE a single, valid JSON array of strings that conforms EXACTLY to the 'responseConstraint' schema. Do not add any conversational text or formatting.
2.  Each string in the array MUST be a unique folder path (e.g., "Web Development/Front-End", "Finance/Trading").
3.  Do not include the main "Bookmarks Bar" in the list.
4.  Base the folder names purely on the content of the provided links.
5.  Generate only the paths needed for the current batch.
`;
}

/**
 * 1C. Example of the Input (User Query) for Task 1
 * This is the sample data your JS will provide to the prompt() method.
 */
const TASK1_USER_QUERY_EXAMPLE = `
GENERATE the unique folder path list based on these sample bookmarks:

Bookmark 1: Title: Deploying Chrome Extensions; URL: https://developer.chrome.com/docs/webstore
Bookmark 2: Title: Gemini Nano Prompt API; URL: https://ai.google.dev/docs/nano
Bookmark 3: Title: Best Mousse Recipe; URL: https://foodblog.com/mousse
Bookmark 4: Title: Firestore Security Rules; URL: https://firebase.google.com/rules
Bookmark 5: Title: Python Pandas Dataframes; URL: https://pandas.pydata.org/docs
`;

/**
 * 1D. Example of the Expected Output for Task 1 (JSON String)
 */
const TASK1_EXPECTED_OUTPUT = JSON.stringify([
  "AI & On-Device Models",
  "Web Development/Chrome Extensions",
  "Web Development/Firebase & Backend",
  "Data Science & Python",
  "Cooking & Recipes"
], null, 2);